<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asphalt Admin Control</title>
    <link rel="stylesheet" href="style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Outfit:wght@400;700&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <span class="logo-icon">üèéÔ∏è</span>
                <h1>Asphalt<span>Admin</span></h1>
            </div>
            <nav>
                <button class="nav-btn active" data-target="overview">
                    <span class="icon">üìä</span> –û–≥–ª—è–¥
                </button>
                <button class="nav-btn" data-target="users">
                    <span class="icon">üë•</span> –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ
                </button>
                <button class="nav-btn" data-target="broadcast">
                    <span class="icon">üì£</span> –†–æ–∑—Å–∏–ª–∫–∞
                </button>
                <button class="nav-btn" data-target="logs">
                    <span class="icon">üìù</span> –õ–æ–≥–∏
                </button>
            </nav>
            <div class="sidebar-footer">
                <div class="status-indicator">
                    <span class="dot pulse"></span> Online
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="content">
            <!-- Header -->
            <header class="top-bar">
                <div class="search-bar">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="userServerSearch" placeholder="–®—É–∫–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ email —á–∏ ID...">
                </div>
                <div class="admin-profile">
                    <span class="admin-name">–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä</span>
                    <div class="avatar">A</div>
                </div>
            </header>

            <!-- Sections -->
            <section id="overview" class="tab-content active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-info">
                            <h3>–í—Å—å–æ–≥–æ —é–∑–µ—Ä—ñ–≤</h3>
                            <p id="stat-total-users">0</p>
                        </div>
                        <div class="stat-icon users">üë•</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-info">
                            <h3>–ê–∫—Ç–∏–≤–Ω—ñ —Å–µ—Å—ñ—ó</h3>
                            <p id="stat-active-sessions">0</p>
                        </div>
                        <div class="stat-icon active">‚úÖ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-info">
                            <h3>–ü—Ä–µ–º—ñ—É–º</h3>
                            <p id="stat-premium">0</p>
                        </div>
                        <div class="stat-icon premium">‚≠ê</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-info">
                            <h3>–ó–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ</h3>
                            <p id="stat-blocked">0</p>
                        </div>
                        <div class="stat-icon blocked">üö´</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-info">
                            <h3>–ó—ñ–±—Ä–∞–Ω–æ –Ω–∞–≥–æ—Ä–æ–¥</h3>
                            <p id="stat-rewards">0</p>
                        </div>
                        <div class="stat-icon rewards">üéÅ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-info">
                            <h3>–°–∏—Å—Ç–µ–º–∞</h3>
                            <p id="stat-system-status">...</p>
                            <button onclick="toggleSystemPause()" class="text-xs hover:underline"
                                style="color: var(--accent-blue)">–í–ö–õ/–í–ò–ö–õ</button>
                        </div>
                        <div class="stat-icon system">‚öôÔ∏è</div>
                    </div>
                </div>

                <div class="charts-row">
                    <div class="chart-container glass">
                        <h3>–ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –∑–±–æ—Ä—É (7 –¥–Ω—ñ–≤)</h3>
                        <canvas id="activityChart"></canvas>
                        <button onclick="fetchStats()"
                            style="position: absolute; top: 1rem; right: 1rem; font-size: 0.7rem; opacity: 0.5;">–û–Ω–æ–≤–∏—Ç–∏</button>
                    </div>
                </div>

                <div class="rewards-overview mt-8">
                    <h2 class="section-title">üéÅ –ü–æ—Ç–æ—á–Ω—ñ –Ω–∞–≥–æ—Ä–æ–¥–∏ —É –≥—Ä—ñ</h2>
                    <div id="global-rewards-container" class="rewards-grid">
                        <div class="reward-placeholder">–ó–±—ñ—Ä –Ω–∞–≥–æ—Ä–æ–¥ —â–µ –Ω–µ –ø—Ä–æ–≤–æ–¥–∏–≤—Å—è...</div>
                    </div>
                </div>
            </section>

            <section id="users" class="tab-content">
                <div class="table-container glass">
                    <table id="usersTable">
                        <thead>
                            <tr>
                                <th>Telegram ID</th>
                                <th>Email</th>
                                <th>–¢–∏–ø</th>
                                <th>–û—Å—Ç–∞–Ω–Ω—ñ–π –∑–±—ñ—Ä</th>
                                <th>–°–µ—Å—ñ—è</th>
                                <th>–î—ñ—ó</th>
                            </tr>
                        </thead>
                        <tbody id="usersList">
                            <!-- JS populated -->
                        </tbody>
                    </table>
                </div>
            </section>

            <section id="broadcast" class="tab-content">
                <div class="form-container glass">
                    <h3>üì¢ –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ä–æ–∑—Å–∏–ª–∫—É</h3>
                    <p class="form-desc">–í–∏–±–µ—Ä—ñ—Ç—å –≥—Ä—É–ø—É –∞–±–æ –≤–∫–∞–∂—ñ—Ç—å ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.</p>

                    <div class="input-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div class="input-group">
                            <label for="broadcastGroup">–¶—ñ–ª—å–æ–≤–∞ –≥—Ä—É–ø–∞:</label>
                            <select id="broadcastGroup" class="glass-input">
                                <option value="all">–í—Å—ñ (–ê–∫—Ç–∏–≤–Ω—ñ)</option>
                                <option value="premium">–¢—ñ–ª—å–∫–∏ –ü—Ä–µ–º—ñ—É–º</option>
                                <option value="blocked">–¢—ñ–ª—å–∫–∏ –ó–∞–±–∞–Ω–µ–Ω—ñ</option>
                                <option value="custom">–ö–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π ID</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label for="broadcastTarget">ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:</label>
                            <input type="text" id="broadcastTarget" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: 12345678" disabled>
                        </div>
                    </div>

                    <div class="input-group" style="margin-top: 1rem;">
                        <label for="broadcastTTL">–ß–∞—Å –∂–∏—Ç—Ç—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (—Å–µ–∫, –ø–æ—Ä–æ–∂–Ω—å–æ = –Ω–∞–∑–∞–≤–∂–¥–∏):</label>
                        <input type="number" id="broadcastTTL" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: 3600">
                    </div>

                    <textarea id="broadcastMsg" placeholder="–í–≤–µ–¥—ñ—Ç—å —Ç–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è..."
                        style="margin-top: 1.5rem;"></textarea>

                    <div class="broadcast-templates"
                        style="margin-top: -1.7rem; margin-bottom: 2rem; display: flex; gap: 0.5rem; position: relative; z-index: 10;">
                        <button onclick="applyTemplate('downtime')"
                            class="text-xs bg-gray-800 px-2 py-1 rounded hover:bg-gray-700"
                            style="border: 1px solid var(--glass-border); color: var(--text-muted); cursor: pointer;">‚ö†Ô∏è
                            –ó–±—ñ–π –≥–µ–π–º–ª–æ—Ñ—Ç—É</button>
                        <button onclick="applyTemplate('resolved')"
                            class="text-xs bg-gray-800 px-2 py-1 rounded hover:bg-gray-700"
                            style="border: 1px solid var(--glass-border); color: var(--text-muted); cursor: pointer;">‚úÖ
                            –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ</button>
                    </div>

                    <button id="sendBroadcastBtn" class="btn-primary">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
                    <div id="broadcastStatus" class="status-msg"></div>
                </div>
            </section>

            <section id="logs" class="tab-content">
                <div class="logs-container glass">
                    <h3>üìù –û—Å—Ç–∞–Ω–Ω—ñ –¥—ñ—ó –≤ —Å–∏—Å—Ç–µ–º—ñ</h3>
                    <div id="globalLogsList" class="logs-list">
                        <!-- JS populated -->
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Notification system -->
    <div id="toast" class="toast"></div>


    <!-- Modal -->
    <div id="resultModal" class="modal">
        <div class="modal-content">
            <h3 id="modalTitle">–†–µ–∑—É–ª—å—Ç–∞—Ç</h3>
            <p id="modalBody"></p>
            <button class="modal-close" onclick="closeModal()">–ó—Ä–æ–∑—É–º—ñ–ª–æ</button>
        </div>
    </div>

    <!-- Chat Modal -->
    <div id="chatModal" class="modal">
        <div class="modal-content chat-modal-content">
            <div class="modal-header">
                <h2 id="chatUserName">–ß–∞—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</h2>
                <span class="close" onclick="closeModal('chatModal')">&times;</span>
            </div>
            <div id="chatContainer" class="chat-bubbles">
                <!-- Messages will be injected here -->
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>